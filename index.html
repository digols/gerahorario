<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Gerador de Horário Escolar — Multi-escolas</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <h1>Gerador de Horário Escolar — Multi-escolas</h1>

  <!-- Login/Admin -->
  <section id="auth">
    <h2>Autenticação</h2>
    <div id="auth-forms">
      <div class="card">
        <h3>Criar administrador</h3>
        <div class="row">
          <label>Usuário (e-mail):</label>
          <input type="email" id="adminEmail" />
        </div>
        <div class="row">
          <label>Senha:</label>
          <input type="password" id="adminPassword" />
        </div>
        <button type="button" id="btnCreateAdmin">Criar</button>
      </div>
      <div class="card">
        <h3>Entrar</h3>
        <div class="row">
          <label>Usuário (e-mail):</label>
          <input type="email" id="loginEmail" />
        </div>
        <div class="row">
          <label>Senha:</label>
          <input type="password" id="loginPassword" />
        </div>
        <button type="button" id="btnLogin">Entrar</button>
      </div>
    </div>
    <div id="authStatus"></div>
  </section>

  <!-- Escolas -->
  <section id="schools" class="hidden">
    <h2>Minhas escolas</h2>
    <div class="row">
      <input type="text" id="schoolName" placeholder="Nome da escola" />
      <button type="button" id="btnAddSchool">Adicionar escola</button>
      <button type="button" id="btnExportSchoolsTxt">Exportar escolas TXT</button>
      <label class="file-label">
        Importar escolas TXT
        <input type="file" id="importSchoolsTxt" accept=".txt" />
      </label>
    </div>
    <div id="schoolsList"></div>
    <div class="row">
      <button type="button" id="btnLogout">Sair</button>
    </div>
  </section>

  <!-- Configuração semana -->
  <section id="weekConfig" class="hidden">
    <h2>Configuração da semana (específica por escola)</h2>
    <div class="row">
      <label>Dias:</label>
      <input type="text" id="daysInput" value="Segunda,Terça,Quarta,Quinta,Sexta" />
    </div>
    <div class="row">
      <label>Horários (vírgula):</label>
      <input type="text" id="slotsInput" value="07:00-07:50,07:50-08:40,08:40-09:30,Intervalo,09:50-10:40,10:40-11:30" />
    </div>
    <button type="button" id="btnApplyWeek">Aplicar na escola</button>
  </section>

  <!-- Cadastros por escola -->
  <section id="registry" class="hidden">
    <h2>Cadastros da escola selecionada</h2>
    <div class="grid-2">
      <div class="card">
        <h3>Professores</h3>
        <div class="row">
          <input type="text" id="teacherName" placeholder="Nome" />
          <input type="text" id="teacherSubjects" placeholder="Matérias (vírgula)" />
          <button type="button" id="btnAddTeacher">Adicionar</button>
        </div>
        <div class="row">
          <button type="button" id="btnExportTeachersTxt">Exportar professores TXT</button>
          <label class="file-label">
            Importar professores TXT
            <input type="file" id="importTeachersTxt" accept=".txt" />
          </label>
        </div>
        <div id="teachersList"></div>
      </div>

      <div class="card">
        <h3>Turmas</h3>
        <div class="row">
          <input type="text" id="className" placeholder="Turma (ex.: 1A)" />
          <button type="button" id="btnAddClass">Adicionar turma</button>
        </div>
        <div id="classesList"></div>
      </div>
    </div>

    <div class="card">
      <h3>Vincular matérias à turma (com professor e aulas/semana)</h3>
      <div class="row">
        <select id="classSelector"></select>
        <input type="text" id="subjectName" placeholder="Matéria" />
        <input type="text" id="subjectTeacher" placeholder="Professor" />
        <input type="number" id="subjectWeekly" placeholder="Aulas/semana" min="1" />
        <button type="button" id="btnLinkSubject">Vincular</button>
      </div>
      <div class="row">
        <button type="button" id="btnExportClassesTxt">Exportar turmas+matérias TXT</button>
        <label class="file-label">
          Importar turmas+matérias TXT
          <input type="file" id="importClassesTxt" accept=".txt" />
        </label>
      </div>
    </div>
  </section>

  <!-- Geração e horários salvos -->
  <section id="scheduling" class="hidden">
    <h2>Horários da escola</h2>
    <div class="row">
      <button type="button" id="btnGenerateSchedule">Gerar horário</button>
      <button type="button" id="btnSaveSchedule">Salvar horário</button>
      <button type="button" id="btnLoadSchedule">Carregar horário salvo</button>
      <button type="button" id="btnExportExcel">Exportar Excel</button>
    </div>
    <div id="scheduleContainer"></div>
    <h3>Versões salvas</h3>
    <div id="savedSchedulesList"></div>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
